<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<html class='no-js'>
  <head>
    <meta charset='utf-8'>
    <meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
    <title>Unexplained syntax error on PhantomJS with strict mode | Julio</title>
    <meta content='Blog' name='description'>
    <meta content='width=device-width' name='viewport'>
    <link href='https://plus.google.com/117723231368654711284/posts' rel='author'>
    <meta content='summary' name='twitter:card'>
    <meta content='@julioolvr' name='twitter:site'>
    <meta content='Unexplained syntax error on PhantomJS with strict mode' name='twitter:title'>
    <meta content="Short story: PhantomJS considers a syntax error when a named function expression is called the same as some of its parameters, and won't be very explicit about it.&#x000A;" name='twitter:description'>
    <meta name='twitter:image'>
    <script src="../../../../javascripts/vendor/modernizr-2.6.1.min.js" type="text/javascript"></script>
    <link href="http://fonts.googleapis.com/css?family=Open+Sans|Bree+Serif" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=Roboto:400,100,300" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=Raleway:400,100,300" rel="stylesheet" type="text/css" />
    <link href="../../../../stylesheets/site.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <!--[if lt IE 7]> <p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p> <![endif]-->
    <div class='content'>
      <div class='main' role='main'>
        <article class='post'>
          <div class='date'>
            2015/07/25
          </div>
          <h1>
            Unexplained syntax error on PhantomJS with strict mode
          </h1>
          <div class='tags'>
            <a href="/tags/phantomjs/">#phantomjs</a>, <a href="/tags/safari/">#safari</a>, <a href="/tags/javascript/">#javascript</a>
          </div>
          <p>Short story: PhantomJS considers a syntax error when a named function expression is called the same as some of its parameters, and won&#39;t be very explicit about it.</p>
          
          <p></p>
          
          <p>Consider the following code:</p>
          <pre class="highlight javascript"><code><span class="s1">'use strict'</span><span class="p">;</span>&#x000A;<span class="kd">var</span> <span class="nx">something</span> <span class="o">=</span> <span class="kd">function</span> <span class="nx">bug</span><span class="p">(</span><span class="nx">bug</span><span class="p">)</span> <span class="p">{};</span>&#x000A;</code></pre>
          
          <p>The fact that the function is called <code>bug</code>, and the parameter is also called <code>bug</code>, will trigger a syntax error in PhantomJS. Note that a function declaration has no problems with it:</p>
          <pre class="highlight javascript"><code><span class="s1">'use strict'</span><span class="p">;</span>&#x000A;<span class="kd">function</span> <span class="nx">bug</span><span class="p">(</span><span class="nx">bug</span><span class="p">)</span> <span class="p">{}</span>&#x000A;</code></pre>
          
          <p>No syntax error there! But when there <em>is</em> a syntax error, PhantomJS will only say so and won&#39;t specify what the error is. This can be kind of annoying when your automasted tests use Phantom and fail miserably while the app works fine on your browser. One good way to find the cause for these kind of bugs is that PhantomJS behaves very similar to Safari, and this specific bug is also present there. So if you happen to develop on Safari then you&#39;ll see it before it gets to Phantom, but if you don&#39;t it&#39;s a nice trick to remember the next time you have to debug a Phantom-specific bug.</p>
          <div class='comments'>
            <div id='disqus_thread'></div>
            <script>
              var disqus_shortname = 'julioblog'; // required: replace example with your forum shortname
              
              (function() {
                  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                  dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
            <a class='dsq-brlink' href='http://disqus.com'>
              comments powered by
              <span class='logo-disqus'>Disqus</span>
            </a>
          </div>
        </article>
      </div>
      <section class='sidebar'>
        <a href='/'>
          <img class="sidebar-profile-pic" src="http://www.gravatar.com/avatar/a81ad64d19c864be3c478b761f4b4817?s=300" />
        </a>
        <ul class='sidebar-bio'>
          <li>
            <a href='/'>julio olivera</a>
          </li>
          <li>software developer</li>
          <li>
            <a href='http://github.com/julioolvr' target='blank'>github</a>,
            <a href='http://www.twitter.com/julioolvr' target='blank'>twitter</a>
          </li>
        </ul>
      </section>
    </div>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script>
      window.jQuery || document.write('<script src="javascripts/vendor/jquery-1.8.0.min.js"><\/script>')
    </script>
    <script src="../../../../javascripts/site.js" type="text/javascript"></script>
    <script>
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38383863-1']);
      _gaq.push(['_setDomainName', 'joliv.me']);
      _gaq.push(['_trackPageview']);
      
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
