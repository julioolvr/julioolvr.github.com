<!DOCTYPE html><head><title>Unexplained syntax error on PhantomJS with strict mode | Julio</title><meta charset="utf-8"><meta content="width=device-width" name="viewport"><link rel="shortcut icon" type="image/png" href="/favicon.png"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight-ocean.css"><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans|Bree+Serif"><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:400,100,300"><link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Raleway:400,100,300"><script async src="//codepen.io/assets/embed/ei.js"></script></head><body><div class="container"><header><a href="/"><img class="profile-pic" src="http://www.gravatar.com/avatar/a81ad64d19c864be3c478b761f4b4817?s=300"></a><ul class="bio"><li><a href="/">julio olivera</a></li><li>software developer</li><li><a href="http://github.com/julioolvr">github</a>,
<a href="http://www.twitter.com/julioolvr">twitter</a>,
<a href="/en/x/things">things</a></li></ul><div class="langs">[<a href="/es">es</a>|<a href="/">en</a>]</div></header><main><article class="post"><div class="post-details"><time datetime="2015-07-25T00:00:00.000Z">2015/07/25</time></div><h1>Unexplained syntax error on PhantomJS with strict mode</h1><div class="tags"><a href="/tags/phantomjs">#phantomjs</a>,
<a href="/tags/safari">#safari</a>,
<a href="/tags/javascript">#javascript</a></div><p>Short story: PhantomJS considers a syntax error when a named function expression is called the same as some of its parameters, and won't be very explicit about it.</p>
<p>Consider the following code:</p>
<pre class="hljs"><code><span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">var</span> something = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bug</span>(<span class="hljs-params">bug</span>) </span>{};
</code></pre>
<p>The fact that the function is called <code>bug</code>, and the parameter is also called <code>bug</code>, will trigger a syntax error in PhantomJS. Note that a function declaration has no problems with it:</p>
<pre class="hljs"><code><span class="hljs-meta">'use strict'</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bug</span>(<span class="hljs-params">bug</span>) </span>{}
</code></pre>
<p>No syntax error there! But when there <em>is</em> a syntax error, PhantomJS will only say so and won't specify what the error is. This can be kind of annoying when your automasted tests use Phantom and fail miserably while the app works fine on your browser. One good way to find the cause for these kind of bugs is that PhantomJS behaves very similar to Safari, and this specific bug is also present there. So if you happen to develop on Safari then you'll see it before it gets to Phantom, but if you don't it's a nice trick to remember the next time you have to debug a Phantom-specific bug.</p>
<div class="comments"><div id="disqus_thread"></div><script>var disqus_shortname = 'julioblog'; // required: replace example with your forum shortname

(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><a class="dsq-brlink" href="http://disqus.com"><comments>powered by</comments><span class="logo-disqus">Disqus</span></a></div></article></main></div></body>